HEBREW_KEYWORDS = \
	['','注','砖','','专 转爪专','','转拽转','转转','转爪专','爪专 ','转专','拽 专','爪专驻 砖',
	 '砖驻','砖驻',' 转专','转驻拽 转拽砖专转','注','转','住','转转 注','注','爪专祝','','驻砖','砖驻','拽住',
	 '拽砖专','注专转 爪专转','爪专','爪专转','转专','驻注','砖','转专','砖专砖','砖专砖','','','砖拽','砖拽','转专转 ','','拽拽'
		,'','专','','','转','爪专','爪专','驻','注爪专','转注转','驻','驻转','砖','拽抓','驻转','专拽','住','拽抓','砖专拽','驻拽',
     '祝','砖','爪专','爪专','祝','','住驻专','专','拽','专','注专','注转','','','爪','','驻注','驻注','驻注','转驻注',
     '驻注','驻注','驻注','砖转','住','住转','专转',' 驻注','砖拽 砖','砖 驻注','驻注','砖 驻注','住住','爪专','专',
     '','专砖 转转','"专\"转"','砖 住驻专','转转','住驻转','"\""','住专转','拽','拽转','拽','拽','砖注转','"驻\""','"\""','"注\""'
		,'拽转','','转拽转',' 住','住专','住转','拽','砖','驻','注','','专祝','驻转','转','专','拽砖','状','住驻','住驻转','转转',
     '','"\""','"\""','','拽','拽专','状','专','专','','','爪专驻','','拽','拽住','注','专','转'
		,'注','砖','住','专','住','拽爪','驻专','','','','转','','驻 ','专驻','拽住拽','拽住拽专驻',
     '砖驻','拽','砖','专驻','专祝','拽 专','','注','驻专','转专住','专专','拽爪','拽','驻住','','拽拽爪转',''
		,'住','','','砖专','住','注','注','砖','砖','','砖','','转专','转专','爪专','住专','驻','','专','驻住拽转',''
		,'住转转','转','驻住拽','驻','转','转','','专','专','注','砖专','注拽祝','转专','转专','转驻拽','驻注','住','砖注','','转拽转',
     '注','','驻专','砖','住转转','转砖转','专','驻','注','注 驻','"注\"驻"','注-驻','住','',
     '爪','','住','砖转注','','注专','拽','爪拽驻','注转','转','转注','住驻专','专','专','专爪','','砖'
		,'转专转','砖','拽专','爪','驻专拽','住','驻转','拽专','拽','转','注','住住','转专','专专','转专','注爪','爪','专转','.驻.',
     '驻"','.驻.','驻"','住','爪专','爪专转','拽','砖','','转转','转','爪','','"','..','驻','驻"','.驻..','驻',
     '驻','']


MATH_KEYWORDS = ['专','拽转 ','专专','砖专','驻','驻','砖专砖','专注','驻拽爪','专爪转','专爪转','转','拽注','专拽','拽',
                 '专','爪注','砖专','砖','砖驻注','拽','拽','转','爪','注','','专注','爪注','注','专注','砖砖','转','拽转',
                 '专','专砖转','爪专','专','驻专拽','专','专','砖转祝','住','驻','专','住专','拽','拽','拽','注爪专转','专','拽爪专','砖专'
	,'-砖','注 专砖','注 砖','注 砖','砖转','砖转','注','驻专专','驻转专','','住祝','专祝','专驻','转','拽专','-专爪',
	             '爪','专','专转','f(x) ','g(x) ','x','y','专','注专','专转','','','','驻专爪','','住驻拽','住专转 ','住专 '
	,'砖转','住','住','专','住',' 驻 拽',' 住','住','住驻','住转专转','拽专转','专','专注','转','转 转','转转','住',
	             '转','','转','','注抓','注爪','转','转驻转','专','拽专拽','砖','拽祝','驻驻','砖驻','','转',
	             '爪','驻转专住','转住','注','注','住','','拽驻','砖','转','','','爪','专住','住','住','住','住'
	,'','驻专驻专爪','转','拽','爪注','爪','转转','','转专','拽砖转','转专','拽驻转','砖拽','爪','拽转 专','拽 专','',
	             '','爪','砖','砖','爪注','拽拽','驻','驻转','专专','专','专','注转','专','住住','拽住住','住','sin',
	             'cos','tan','atan','arctan','log','ln','砖','砖专','注专','注专','转','拽住','','拽爪','驻转','专','转','砖转',
	             '注','专','','转','驻专拽','转','砖','砖','注','爪','=','+','/','*','0','1','2','3','4','5','6','7','8','9',''
	,'拽注专','拽专','拽注专','拽专','驻住','转','砖转','砖砖','专注','砖','砖砖','砖注','砖','转砖注','注砖专','住','驻住','驻','拽','砖','驻转',
	             '住专','专','转','拽','拽','转','驻专','','专','住专','驻','注驻转','住驻','拽注','','"','',
	             '"','住','驻','爪转','驻','住','拽专','拽专','','注 ','注专','住住','抓','爪','爪','转转','转','拽爪'
	,'爪专祝','爪专驻','住拽专','','爪','砖专','砖驻注','专','','砖','砖','爪','','驻','住','驻专','驻住','注拽','注拽',
	             '拽','住拽专','专','','爪转','爪','专注','砖砖','砖转','注砖专转','转','祝','','','专','驻',''
	,'>','<','%','专','拽爪','砖拽','住住','砖转','砖转','专','注','注','专转','专驻','专','拽住','专','转拽','转注','专转',
	             '专','专','专','转砖','','专','专','拽','拽','转','转','转','拽拽','转','转','转','住转','住转',
	             '拽','拽转','','专','专转','转','砖转','x','y','注','拽','拽转','砖专砖','注专转','砖专','拽','住驻转'
	,'住驻','驻拽','驻拽转','驻拽','','','爪爪','爪爪','','','驻拽爪','转驻住','转驻住转','驻','驻住','专','专','爪',
	             '爪','爪','注专','拽住','砖祝','爪','砖驻转','专','转爪','转爪','转爪','转专','爪转','','砖','砖','砖转','驻专'
	,'驻专转',',砖专','','住','驻住','驻拽爪','驻拽转','驻拽爪转','专','专','砖','专转','专','专转','专','驻拽爪','专',
	             '拽','拽转','砖','砖专','住专','专','专砖','e','驻','住驻','住驻转','拽住','专转','住专','住专','住',
	             '注专转','','拽','驻','专','住专','拽','爪','拽专','专','拽','拽','转',
				 'x','y','z','=']



ENCOURAGE_KEYWORDS = ["注", "爪", "专", " ", "驻", "爪", "", "拽", "拽", " ","",
                      "转转", " 注", "转转", "转转转", "", "转", "注转", "注", "", "驻转",
                      "驻", "爪拽", "爪拽转", "爪拽", "爪拽转", "", "", "", "", "转"]

QUESTION_KEYWORDS = ["爪", "", "注", "", "", "", "", "驻", "", "", ""]

ACK_KEYWORDS = ['转','转','','住','驻','',""]

THE_PREFIX = ''

GENERAL_PREFIXES = ['']

GENERAL_SUFFIXES = ['.','?',',']

NEGATIVE_PREFIXES = ['','']


#TODO: Add prefixes and suffixes

HEBREW = 'HEBREW'
MATH = 'MATH'
ENCOURAGE = 'ENCOURAGE'
QUESTION = 'QUESTION'
ACK = 'ACK'

WORDS_PARAMS={HEBREW:{'keywords':HEBREW_KEYWORDS},
              MATH:{'keywords':MATH_KEYWORDS},
              ENCOURAGE:{'keywords':ENCOURAGE_KEYWORDS,'math_to_remove':["","","","转"]},
              QUESTION:{'keywords':QUESTION_KEYWORDS},
              ACK:{'keywords':ACK_KEYWORDS,'specific_suffixes':['!']}}


def is_in_msg(word,msg):
	if ' {} '.format(word) in msg:
		return True
	if msg.startswith(word) or msg.endswith(word):
		return True
	return False


def is_word_in_msg(word,msg,prefixes,suffixes):
	if is_in_msg(word,msg):
		return True
	for prefix in prefixes:
		if is_in_msg(' {}{} '.format(prefix,word),msg):
			return True
	for suffix in suffixes:
		if is_in_msg(' {}{} '.format(word,suffix),msg):
			return True
	return False


def isnt_really_in_msg(word,msg,negative_prefixes):
	for prefix in negative_prefixes:
		if ' {} {} '.format(prefix,word) in msg:
			return True
	return False


def get_words_to_remove(keyword_type, group_type):
	if group_type==MATH:
		return WORDS_PARAMS[keyword_type].get('math_to_remove','[]')
	else:
		return []


def count_words(msg,keyword_type,group_type,is_debug=False):
	keywords = WORDS_PARAMS.get(keyword_type).get('keywords')
	specific_prefixes = WORDS_PARAMS.get(keyword_type).get('specific_prefixes',[])
	specific_suffixes = WORDS_PARAMS.get(keyword_type).get('specific_suffixes',[])

	prefixes = specific_prefixes + GENERAL_PREFIXES
	suffixes = specific_suffixes + GENERAL_SUFFIXES

	keywords_to_remove = get_words_to_remove(keyword_type,group_type)

	for key in keywords_to_remove:
		if key in keywords:
			keywords.remove(key)

	count = 0
	found_words = []
	for word in keywords:
		# Check for whole words - with space before and after
		if is_word_in_msg(word,msg,prefixes,suffixes) and not isnt_really_in_msg(word,msg,NEGATIVE_PREFIXES):
			count += 1
			found_words.append(word)

	if count>0:
		if is_debug:
			print('TYPE: {}, MSG: {}, words: {}'.format(keyword_type, msg,found_words))

	return count
